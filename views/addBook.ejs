<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <a href="/book-category-list" style="text-decoration: none; font-style: italic; margin-left: 25%;" class="text-dark"> 	&larr;Trở
            về</a>
        <form class="col-6 border border-dark rounded p-3 m-auto" name="addBook">
            <h1>Thêm sách</h1>
            <div class="form-group mb-3 col-6 d-inline">
                <label for="bookname">Tên sách</label>
                <input class="form-control bg-" name="bookname" id="bookname">
            </div>

            <div class="form-group mb-3 col-6 d-inline">
                <label for="price">Giá tiền</label>
                <input class="form-control bg-" type="number" name="price" id="price">
            </div>

            <div class="form-group mb-3">
                <label for="tenLoai">Mô tả</label>
                <textarea name="description" class="col-12" rows="10"></textarea>
            </div>

            <div class="form-group mb-3">
                <label for="tenLoai">File hình</label>
                <input class="form-control bg-" name="url">
            </div>
            
            <div class="form-group mb-3">
                <label>Hiển thị: </label> &nbsp;
                <input type="radio" name="display" value="1" checked> Hiện &nbsp; &nbsp;
                <input type="radio" name="display" value="0"> Ẩn
            </div>

            <div class="form-group mb-3">
                <label>Nổi bật: </label> &nbsp;
                <input type="radio" name="highlight" value="1"> Có &nbsp; &nbsp;
                <input type="radio" name="highlight" value="0"> Không
            </div>
            <div class="form-group mt-3 ">
                <a href="" class="btn btn-dark">DANH SÁCH</a>  
                <button type="button" onclick="addBook()" class="btn btn-danger">THÊM LOẠI</a>
            </div>
        </form>
    </div>

    <script>
        function addBook() {
            let name = document.addBook.bookname.value;
            let price = document.addBook.price.value;
            let description = document.addBook.description.value;
            let url = document.addBook.url.value;
            let display = document.addBook.display.value;
            let id_category = 1;
            let view = 0;
            let highlight = document.addBook.highlight.value;

            let data = {
                name: name,
                description: description,
                url: url,
                price: price,
                display: display ,
                id_category: id_category,
                view: 0,
                highlight: highlight,
            }

            let URL = "http://localhost:3000/book/addnew";
            fetch(URL, {
                method: "POST",
                body: JSON.stringify(data),
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                },
            })
                .then(response => response.json())
                .then(function(data){
                    document.addcategory.reset();
                    console.log(data);
                })
                .catch(err => console.log(err));
        }
    </script>
</body>

</html>